#勤怠管理
***
### 一般ユーザー向け機能
#### 機能一覧
すべての従業員向けに以下の機能を公開する。
1. 個人を認証する[^2]
    * oauth2による認証
    * ID/PASSによる認証
    * 従業員アカウント数は、課金対象としないこと
1. 顔写真登録
    * 認証用および名札用
    * 認証の精度向上のために複数枚撮影して、本人が名札用写真をチョイスする機能を持つ
1. 希望シフトの登録
    * 登録方式をユーザーが選択できる
      * ホワイトリスト/ブラックリスト
1. 確定シフトの通知
    * 店長のシフト確定をトリガーにして従業員に確定結果をリリース
1. シフト開始直前のプッシュ通知
    * 確定済みシフトのn分前に本人に通知(SMSやメールで)。従業員ごとにパラメータを設定可能
1. 入力済み勤怠の修正申請
    * 本人申請による変更の入力フォームの用意。
    * 理由
    * 変更履歴を、変更前に復元可能なレベルで保存。
1. 支払い済み給与明細の表示
    * PRからデータを受け取って表示するのみの機能
    * 人件費管理にも使用
    * 退職者も閲覧可能
1. 源泉徴収票のダウンロード
    * 年度を選択してのPDFのダウンロード機能のみ[^1]
    * 退職者も閲覧可能
1. 年間支払額予想の表示
    * 配偶者控除対象の主婦向けに
    * 1-12末までの確定合計と予想

#### 対象クライアント
* PC用モダンプラウザ
* chrome on android
* safari,chrome on iOS

[^1]: PDFのアップロードは本部スタッフによる手動。
[^2]: メインWINBOARDと同じPCで運用する可能性があるため、別のサブドメインで運用する

### 店舗向け機能
#### 画面一覧
1. DWS
    * 希望シフト・実シフト・実績を並べて表示
    * 印刷
2. MWS
3. シフトパターン管理

#### 機能一覧
1. シフトを追加することができる
2. シフトを変更することができる
2. 希望シフトと実シフトのコンフリクトをチェックできる
3. 実シフトとDWSから導かれた必要人数のコンフリクトをチェックできる
4. 期間と対象人員を指定してシフトをフリーズすることができる
5. フリーズしたシフトを対象本人に通知することができる
6. フリーズしたシフトのフリーズを解除することができる
7. 現在日時からn日後の間にフリーズしていないシフトがあった場合、マネージャーにアラートすることができる
8. 現在日時からn日後の間に必要人数を満たさない日があった場合、マネージャーにアラートすることができる
##### 実績のデータ構造について
打刻の実績および修正履歴だけを記録しておく
そのデータからリアルタイムに実績を構築する。
###### メリット
１日２回以上の出勤と複数回休憩は、概念の境目が曖昧。
このデータ構造により、それらを統合して処理できると思われる。
###### デメリット
計算能力を多く消費する。
