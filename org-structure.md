# 組織構造と社員の管理
***
## 組織構造
WINBOARDのデータソースには、組織構造や店舗名は一切定義せず、外部(SS)からREST WEBサービスで得られるデータを常に参照するものとする。

よって、WINBOARD上の組織構造は、SSに存在する組織構造に準拠する。
本社を頂点としたツリー構造で表され、営業本部の場合、末端の組織は店舗となる。

#### 店舗組織構造例
> 本社 -> 営業本部 -> 営業部 -> 札幌エリア -> 南2条店

#### 本部組織構造例
> 本社 -> 管理本部 -> 人事総務部 -> システム課

ツリー構造はSSから得られる構造を流用するが、末端組織についてのみ、以下に述べる機能を
持つこととする。

ただし、必要最低限かつ、WINBOARD内でのみ使用する属性に関しては、WINBOARDのデータソース内にマスタとして保持しても構わない。以下に述べる属性は、その一例である。

#### 末端組織の付加機能について
* 末端組織であるかどうかは、SSより情報を得られるものとする
* マネージャー[^1]を複数持つことができる
  * 指定された従業員の職位には依存せず、従業員ならばだれでもマネージャーに指定することができる
  * マネージャーの定義はWINBOARD内のデータソースに情報を保持する
    * 組織構造を無視した人員アサインがなされる可能性があるため、HRに持ちにくいから。
  * マネージャーおよびシニアマネージャーは最低1名の指定を必須とする。
  * マネージャーは、店舗コード・期間と社員コードによって定義される
  * マネージャーは、管理組織下で発生する申請事項を承認する権限を持つ
* マネージャーに定義された従業員は、該当店舗の管理事務をすべて実施することができる
* シニアマネージャー[^2]を複数持つことができる
  * マネージャーによる申請事項はシニアマネージャーのみが承認する権限を持つ
* 一人の従業員が複数組織のマネージャーを兼ねることが可能である
* 一人の従業員が複数組織のシニアマネージャーを兼ねることが可能である
* ただし、一人の従業員が同一組織のマネージャーとシニアマネージャーを兼ねることはできない。
* マネージャーおよび、シニアマネージャーには会社から貸与されたメールアドレスが必要。
  * メールによる督促を可能にするため
* 複数の(シニア)マネージャーが存在する場合、どちらかが承認すれば決裁とする。
* ここで触れる概念は、WINBOARD内の権限設定にのみ影響し、SSから得られる役職情報とは独立である
* 承認待ち案件データには、承認者を特定したデータ構造にしない
  * その時点での承認者に回せるように

[^1]: 店長・課長
[^2]: SV・部長
##### 設定例

店舗    | マネージャー        | シニアマネージャー
--|---|--
南2条店  | 佐々木(17/01/01-∞)  |  本間(16/10/01-∞)
つくば店  |  板倉(17/01/01-6/30)  |  児島(16/07/01-∞)

##### テーブル構造案

社員コード | 店舗コード | マネージャー種類 | 期間開始 | 期間終了
--|---|---|---|---|--
013230 | 1111 | シニアマネージャー | 2017/01/01 | 2018/02/28
013230 | 1112 | シニアマネージャー | 2017/01/01 | 2018/02/28
011112 | 1203 | マネージャー | 2017/02/01 | 2099/12/31
011111 | 1203 | マネージャー | 2017/03/01 | 2099/12/31

## 社員情報の保持方法

社員情報は、基本的に外部(SS)からREST経由で得られたデータをReadOnlyで流用する。

ただし、必要最低限かつ、WINBOARD内でのみ使用する属性に関しては、WINBOARDのデータソース内にマスタとして保持しても構わない。

## 各種コードと名称のマッピングについて

RESTAPIレベルではコードのみで運用し、画面表示の際にjavascriptで名称↔コードテーブルとマッピングさせて入れ替える仕組みを採用したい

### 実例
[はてなブログ](http://delete-all.hatenablog.com/)のプロフ欄参照
